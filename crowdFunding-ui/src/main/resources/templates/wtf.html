<!DOCTYPE HTML>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Krajee JQuery Plugins - © Kartik</title>
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css"
          crossorigin="anonymous">
    <link href="test/css/fileinput.css" media="all" rel="stylesheet" type="text/css">
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.5.0/css/all.css" crossorigin="anonymous">
    <link href="test/themes/explorer-fas/theme.css" media="all" rel="stylesheet" type="text/css">
    <script src="https://code.jquery.com/jquery-3.3.1.min.js" crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/js/bootstrap.bundle.min.js"
            crossorigin="anonymous"></script>
    <script src="test/js/plugins/piexif.js" type="text/javascript"></script>
    <script src="test/js/plugins/sortable.js" type="text/javascript"></script>
    <script src="test/js/fileinput.js" type="text/javascript"></script>
    <script src="test/js/locales/fr.js" type="text/javascript"></script>
    <script src="test/themes/fas/theme.js" type="text/javascript"></script>
    <script src="test/themes/explorer-fas/theme.js" type="text/javascript"></script>
</head>
<body>
<div>
    <div class="form-group">
        <div class="file-loading">
            <label>Preview File Icon</label>
            <input id="file-3" type="file" multiple>
        </div>
    </div>
</div>
<script>
    function Images() {
    }

    Images.prototype.setUrl = function (url) {
        this.url = url
    };
    Images.prototype.getUrl = function () {
        return this.url
    };

    var images = new Images();
    images.setUrl('https://capharnaum.oss-us-west-1.aliyuncs.com/cffe7c78-93ee-4b2e-97f0-293093a929d1.jpg');
    $("#file-3").fileinput({
        theme: 'fas',
        uploadUrl: '/file/upload',
        allowedFileTypes: ['image'],
        overwriteInitial: true,
        initialPreviewAsData: true,
        maxFileCount: 1,    //允许每次上传的文件数为1
        minFileSize: 200,
        maxFileSize: 1024 * 4,
        maxFilesNum: 1,
        showClose: false,
        uploadExtraData: {userToken: 'fifteenthofjuly'},
        initialPreview: [
            images.getUrl()
            //"https://capharnaum.oss-us-west-1.aliyuncs.com/28902d0c-525d-48c8-929e-25fd60a73d9e.jpg",
            //"https://capharnaum.oss-us-west-1.aliyuncs.com/b4fc6903-fcc8-4b1c-9fa3-f934d9c2a6b8.jpg",
            //"https://capharnaum.oss-us-west-1.aliyuncs.com/cffe7c78-93ee-4b2e-97f0-293093a929d1.jpg"
        ],
        initialPreviewConfig: [
            {}
            // {caption: "transport-1.jpg", size: 329892, width: "120px", key: 1}
            //{caption: "transport-2.jpg", size: 872378, width: "120px", key: 2},
            //{caption: "transport-3.jpg", size: 632762, width: "120px", key: 3}
        ]
    }).on('fileuploaded', function (event, data, previewId) {
        console.log("文件已经上传，fileId=" + previewId);
    }).on('filesuccessremove', function (event, id) {
        console.log("文件被移除，fileId=" + id);
    });
</script>
</body>
</html>